{% extends 'base.html' %}
{% load static %}

{% block css %}
<title>{{ note.title }}</title>
<link rel="stylesheet" href="{% static 'noteapp/css/note.css' %}"/>
{% endblock %}

{% block content %}
<div class="note-panel">
    <a href="{% url 'note_view_mode' note.pk %}" class="tooltip">
        <img src="{% static 'noteapp/svg/view.svg' %}" alt="">
        <span class="tooltiptext">Перейти в режим обзора</span>
    </a>
    <a href="{% url 'update_note' note.pk %}" class="tooltip">
        <img src="{% static 'noteapp/svg/note-properties.svg' %}" alt="">
        <span class="tooltiptext">Изменить данные заметки</span>
    </a>
    <a class="tooltip" onclick="copy_to_clipboard()">
        <img src="{% static 'noteapp/svg/copy.svg' %}" alt="">
        <span class="tooltiptext">Скопировать содержимое</span>
    </a>
    <a href="{% url 'export_note' note.pk %}" class="tooltip">
        <img src="{% static 'noteapp/svg/md.svg' %}" alt="">
        <span class="tooltiptext">Экспортировать как .md файл</span>
    </a>
    <a href="{% url 'delete_note' note.pk %}" class="tooltip">
        <img src="{% static 'noteapp/svg/delete.svg' %}" alt="">
        <span class="tooltiptext">Удалить заметку</span>
    </a>
    <a href="" class="tooltip">
        <img src="{% static 'noteapp/svg/save.svg' %}" alt="">
        <span class="tooltiptext">Сохранить изменения</span>
    </a>
</div>


<!-- заметка -->
<div class="note-block">
    <div class="note-info-container">
        <div class="note-image">
            <img
                    class="circled-icon note-icon"
                    src="{{ note.icon.url }}"
                    alt="Заметка"
            />
        </div>

        <div class="note-info">
            <div class="note-title">
                <h2>{{ note.title }}</h2>
            </div>

            {% if note.description %}
            <div class="note-description">
                <p>{{ note.description }}</p>
            </div>
            {% endif %}

            <div class="category" style="background-color: {{ note.category.color }}">
                <h2>{{ note.category }}</h2>
            </div>
            <div class="date-container">
                <p><span class="date-span">upd.</span> {{ note.time_update|date:"d.m.Y" }} <span
                        class="date-span"> / </span>{{ note.time_update|date:"H:i" }} <span
                        class="date-span">(мск)</span>
                </p>
            </div>
        </div>
    </div>

    <form method="post" tabindex="-1">
        {% csrf_token %}
        <div class="note-content">
            <div class="note-div" contenteditable>
                {{ form.content }}
            </div>
        </div>
        <button type="submit">Сохранить изменения</button>
    </form>
</div>

<!-- для нажатия невидимой кнопки сохранения через иконку save.svg -->
<script src="{% static 'noteapp/js/click_save_button.js' %}"></script>

<!-- для сохранения положения экрана на странице при добавлении контента в textarea -->
<script src="{% static 'noteapp/js/save_screen_position.js' %}"></script>

<!-- для вставки 4-х пробелов при нажатии tab -->
<script src="{% static 'noteapp/js/insert_four_spaces.js' %}"></script>

<!-- для копирования в буфер -->
<script src="{% static 'noteapp/js/copy_to_clipboard.js' %}"></script>

<!-- Отключение tabindex на всей странице -->
<script src="{% static 'noteapp/js/disable_tabindex.js' %}"></script>

{% endblock %}
